// å¤šè¯­è¨€æ–‡æœ¬èµ„æº
// åŒ…å«æ‰€æœ‰ç•Œé¢æ–‡æœ¬çš„ä¸­è‹±æ–‡ç‰ˆæœ¬

const I18N_TEXTS = {
  // é€šç”¨æ–‡æœ¬
  common: {
    loading: {
      zh: 'åŠ è½½ä¸­...',
      en: 'Loading...'
    },
    error: {
      zh: 'é”™è¯¯',
      en: 'Error'
    },
    success: {
      zh: 'æˆåŠŸ',
      en: 'Success'
    },
    confirm: {
      zh: 'ç¡®è®¤',
      en: 'Confirm'
    },
    cancel: {
      zh: 'å–æ¶ˆ',
      en: 'Cancel'
    },
    save: {
      zh: 'ä¿å­˜',
      en: 'Save'
    },
    delete: {
      zh: 'åˆ é™¤',
      en: 'Delete'
    },
    edit: {
      zh: 'ç¼–è¾‘',
      en: 'Edit'
    },
    close: {
      zh: 'å…³é—­',
      en: 'Close'
    },
    back: {
      zh: 'è¿”å›',
      en: 'Back'
    },
    next: {
      zh: 'ä¸‹ä¸€æ­¥',
      en: 'Next'
    },
    previous: {
      zh: 'ä¸Šä¸€æ­¥',
      en: 'Previous'
    },
    submit: {
      zh: 'æäº¤',
      en: 'Submit'
    }
  },

  // ç«™ç‚¹ä¿¡æ¯
  site: {
    title: {
      zh: 'ä»™ç•Œé‚€è¯·å‡½',
      en: 'Invitation to Immortal Realm'
    },
    subtitle: {
      zh: 'æ¢ç´¢ä¸œæ–¹æ™ºæ…§çš„ç²¾ç¥å®åº“',
      en: 'Exploring the Spiritual Treasury of Eastern Wisdom'
    },
    description: {
      zh: 'ä¸“æ³¨äºä¸­åä¼ ç»Ÿä¸¹é“ä¿®ç‚¼ä¸æ„è¯†æ¢ç´¢',
      en: 'Focusing on Traditional Chinese Alchemy and Consciousness Exploration'
    }
  },

  // å¯¼èˆªèœå•
  nav: {
    home: {
      zh: 'é¦–é¡µ',
      en: 'Home'
    },
    articles: {
      zh: 'åšæ–‡',
      en: 'Articles'
    },
    practice: {
      zh: 'ç»ƒä¹ ',
      en: 'Practice'
    },
    practiceLog: {
      zh: 'ç‚¼åŠŸæ—¥å¿—',
      en: 'Practice Log'
    },
    language: {
      zh: 'è¯­è¨€',
      en: 'Language'
    },
    switchToEnglish: {
      zh: 'English',
      en: 'English'
    },
    switchToChinese: {
      zh: 'ä¸­æ–‡',
      en: 'ä¸­æ–‡'
    },
    // å¯¼èˆªç»„å
    groups: {
      åšæ–‡: {
        zh: 'åšæ–‡',
        en: 'Articles'
      },
      ç»ƒä¹ : {
        zh: 'ç»ƒä¹ ', 
        en: 'Practice'
      }
    }
  },

  // é¦–é¡µå†…å®¹
  home: {
    intro: {
      zh: 'è¿™é‡Œæ”¶å½•äº†å¼ ä¸‰ä¸°ã€è€å­ç­‰åœ£è´¤çš„ä¸¹é“ç§˜è¯€ï¼Œä»¥åŠç°ä»£çµé­‚å‡ºä½“ä¸æ˜Ÿä½“æŠ•å°„çš„å®è·µæŒ‡å—ï¼Œä¸ºè¿½æ±‚å†…åœ¨è§‰é†’çš„ä¿®è¡Œè€…æä¾›çè´µçš„ä¿®ç‚¼èµ„æºã€‚',
      en: 'Here we collect the alchemical secrets of sages like Zhang Sanfeng and Laozi, along with modern guides for out-of-body experiences and astral projection, providing valuable cultivation resources for practitioners seeking inner awakening.'
    },
    sections: {
      traditionalAlchemy: {
        title: {
          zh: 'ğŸ”ï¸ ä¼ ç»Ÿä¸¹é“',
          en: 'ğŸ”ï¸ Traditional Alchemy'
        },
        description: {
          zh: 'ä¸­åä¼ ç»Ÿä¸¹é“ä¿®ç‚¼çš„æ ¸å¿ƒç§˜è¯€ï¼ŒåŒ…å«å¼ ä¸‰ä¸°å†…ä¸¹36è¯€å’Œè€å­ä¸¹é“21è¯€ï¼Œä¼ æ‰¿åƒå¹´çš„ä¿®çœŸæ™ºæ…§ã€‚',
          en: 'Core secrets of traditional Chinese alchemical cultivation, including Zhang Sanfeng\'s 36 Internal Alchemy Instructions and Laozi\'s 21 Alchemical Instructions, wisdom passed down through millennia.'
        }
      },
      consciousnessExploration: {
        title: {
          zh: 'âœ¨ æ„è¯†æ¢ç´¢',
          en: 'âœ¨ Consciousness Exploration'
        },
        description: {
          zh: 'ç°ä»£æ„è¯†æ¢ç´¢ä¸å¤å…¸æ™ºæ…§çš„ç»“åˆï¼ŒåŒ…æ‹¬çµé­‚å‡ºä½“æŠ€æœ¯å’Œæ˜Ÿä½“æŠ•å°„çš„ç†è®ºä¸å®è·µã€‚',
          en: 'The fusion of modern consciousness exploration with classical wisdom, including theories and practices of out-of-body experiences and astral projection.'
        }
      },
      practiceTools: {
        title: {
          zh: 'âš¡ å®è·µå·¥å…·',
          en: 'âš¡ Practice Tools'
        },
        description: {
          zh: 'å®ç”¨çš„ä¿®ç‚¼è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°è¿›è¡Œçµæ€§å®è·µå’Œæ„è¯†è®­ç»ƒã€‚',
          en: 'Practical cultivation tools to help you better engage in spiritual practice and consciousness training.'
        }
      }
    },
    footer: {
      zh: 'ä»ä¼ ç»Ÿä¸¹é“åˆ°ç°ä»£æ„è¯†æ¢ç´¢ï¼Œå¼€å¯æ‚¨çš„å†…åœ¨è§‰é†’ä¹‹è·¯...',
      en: 'From traditional alchemy to modern consciousness exploration, begin your journey of inner awakening...'
    }
  },

  // ç”¨æˆ·è®¤è¯
  auth: {
    login: {
      zh: 'ç™»å½•',
      en: 'Login'
    },
    logout: {
      zh: 'ç™»å‡º',
      en: 'Logout'
    },
    register: {
      zh: 'æ³¨å†Œ',
      en: 'Register'
    },
    email: {
      zh: 'é‚®ç®±',
      en: 'Email'
    },
    password: {
      zh: 'å¯†ç ',
      en: 'Password'
    },
    emailPlaceholder: {
      zh: 'è¯·è¾“å…¥æ‚¨çš„é‚®ç®±',
      en: 'Please enter your email'
    },
    emailVerification: {
      zh: 'é‚®ç®±éªŒè¯',
      en: 'Email Verification'
    },
    registrationSuccess: {
      zh: 'æ³¨å†Œé‚®ä»¶å·²å‘é€ï¼Œè¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±å¹¶ç‚¹å‡»éªŒè¯é“¾æ¥',
      en: 'Registration email sent. Please check your inbox and click the verification link'
    },
    loginSuccess: {
      zh: 'ç™»å½•æˆåŠŸ',
      en: 'Login successful'
    },
    logoutSuccess: {
      zh: 'å·²æˆåŠŸç™»å‡º',
      en: 'Successfully logged out'
    },
    invalidEmail: {
      zh: 'è¯·æä¾›æœ‰æ•ˆçš„é‚®ç®±åœ°å€',
      en: 'Please provide a valid email address'
    },
    loginRequired: {
      zh: 'è¯·å…ˆç™»å½•ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½',
      en: 'Please login to use this feature'
    }
  },

  // ç‚¼åŠŸæ—¥å¿—
  practiceLog: {
    title: {
      zh: 'ç‚¼åŠŸæ—¥å¿—',
      en: 'Practice Log'
    },
    todaySession: {
      zh: 'ä»Šæ—¥ä¿®ç‚¼',
      en: 'Today\'s Session'
    },
    startPractice: {
      zh: 'å¼€å§‹ç‚¼åŠŸ',
      en: 'Start Practice'
    },
    stopPractice: {
      zh: 'ç»“æŸç‚¼åŠŸ',
      en: 'Stop Practice'
    },
    pausePractice: {
      zh: 'æš‚åœ',
      en: 'Pause'
    },
    resumePractice: {
      zh: 'ç»§ç»­',
      en: 'Resume'
    },
    practiceTime: {
      zh: 'ç‚¼åŠŸæ—¶é•¿',
      en: 'Practice Duration'
    },
    totalTime: {
      zh: 'ç´¯è®¡æ—¶é•¿',
      en: 'Total Time'
    },
    sessionCount: {
      zh: 'ç»ƒä¹ æ¬¡æ•°',
      en: 'Session Count'
    },
    averageTime: {
      zh: 'å¹³å‡æ—¶é•¿',
      en: 'Average Duration'
    },
    practiceNote: {
      zh: 'ç‚¼åŠŸå¿ƒå¾—',
      en: 'Practice Notes'
    },
    notePlaceholder: {
      zh: 'è®°å½•ä»Šå¤©çš„ç‚¼åŠŸä½“éªŒã€æ„Ÿæ‚Ÿæˆ–é‡åˆ°çš„é—®é¢˜...',
      en: 'Record today\'s practice experience, insights, or any issues encountered...'
    },
    saveNote: {
      zh: 'ä¿å­˜å¿ƒå¾—',
      en: 'Save Notes'
    },
    practiceHistory: {
      zh: 'ç‚¼åŠŸå†å²',
      en: 'Practice History'
    },
    practiceStats: {
      zh: 'ç‚¼åŠŸç»Ÿè®¡',
      en: 'Practice Statistics'
    },
    thisWeek: {
      zh: 'æœ¬å‘¨',
      en: 'This Week'
    },
    thisMonth: {
      zh: 'æœ¬æœˆ',
      en: 'This Month'
    },
    last30Days: {
      zh: 'è¿‘30å¤©',
      en: 'Last 30 Days'
    },
    minutes: {
      zh: 'åˆ†é’Ÿ',
      en: 'minutes'
    },
    hours: {
      zh: 'å°æ—¶',
      en: 'hours'
    },
    days: {
      zh: 'å¤©',
      en: 'days'
    },
    today: {
      zh: 'ä»Šå¤©',
      en: 'Today'
    },
    yesterday: {
      zh: 'æ˜¨å¤©',
      en: 'Yesterday'
    },
    weekdays: {
      zh: ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'],
      en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
    },
    months: {
      zh: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'],
      en: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    noDataYet: {
      zh: 'æš‚æ— æ•°æ®',
      en: 'No data yet'
    },
    practiceStreak: {
      zh: 'è¿ç»­ç‚¼åŠŸ',
      en: 'Practice Streak'
    },
    daysStreak: {
      zh: 'å¤©',
      en: 'days'
    }
  },

  // é”™è¯¯æ¶ˆæ¯
  errors: {
    loadFailed: {
      zh: 'å†…å®¹åŠ è½½å¤±è´¥',
      en: 'Content loading failed'
    },
    networkError: {
      zh: 'ç½‘ç»œè¿æ¥é”™è¯¯',
      en: 'Network connection error'
    },
    serverError: {
      zh: 'æœåŠ¡å™¨é”™è¯¯',
      en: 'Server error'
    },
    unauthorized: {
      zh: 'æœªæˆæƒè®¿é—®',
      en: 'Unauthorized access'
    },
    forbidden: {
      zh: 'è®¿é—®è¢«ç¦æ­¢',
      en: 'Access forbidden'
    },
    notFound: {
      zh: 'é¡µé¢æœªæ‰¾åˆ°',
      en: 'Page not found'
    },
    sessionExpired: {
      zh: 'ä¼šè¯å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',
      en: 'Session expired, please login again'
    },
    tryAgain: {
      zh: 'é‡è¯•',
      en: 'Try Again'
    },
    reload: {
      zh: 'é‡æ–°åŠ è½½',
      en: 'Reload'
    }
  },

  // æ—¶é—´æ ¼å¼
  time: {
    justNow: {
      zh: 'åˆšåˆš',
      en: 'Just now'
    },
    minutesAgo: {
      zh: 'åˆ†é’Ÿå‰',
      en: 'minutes ago'
    },
    hoursAgo: {
      zh: 'å°æ—¶å‰',
      en: 'hours ago'
    },
    daysAgo: {
      zh: 'å¤©å‰',
      en: 'days ago'
    },
    weeksAgo: {
      zh: 'å‘¨å‰',
      en: 'weeks ago'
    },
    monthsAgo: {
      zh: 'æœˆå‰',
      en: 'months ago'
    },
    yearsAgo: {
      zh: 'å¹´å‰',
      en: 'years ago'
    }
  }
};

/**
 * è·å–æŒ‡å®šé”®çš„æœ¬åœ°åŒ–æ–‡æœ¬
 * @param {string} key - æ–‡æœ¬é”®ï¼Œæ”¯æŒç‚¹å·åˆ†éš”çš„è·¯å¾„ï¼Œå¦‚ 'common.loading'
 * @param {string} lang - è¯­è¨€ä»£ç ï¼Œå¦‚æœä¸æä¾›åˆ™ä½¿ç”¨å½“å‰è¯­è¨€
 * @param {Object} params - æ–‡æœ¬å‚æ•°ï¼Œç”¨äºæ›¿æ¢å ä½ç¬¦
 * @returns {string} æœ¬åœ°åŒ–çš„æ–‡æœ¬
 */
function getText(key, lang = null, params = {}) {
  // è·å–å½“å‰è¯­è¨€
  const currentLang = lang || (window.I18n ? window.I18n.getCurrentLanguage() : 'zh');
  
  // è§£æé”®è·¯å¾„
  const keys = key.split('.');
  let text = I18N_TEXTS;
  
  // éå†è·¯å¾„è·å–æ–‡æœ¬å¯¹è±¡
  for (const k of keys) {
    if (text && typeof text === 'object' && k in text) {
      text = text[k];
    } else {
      console.warn(`æœªæ‰¾åˆ°æ–‡æœ¬é”®: ${key}`);
      return key; // è¿”å›é”®åä½œä¸ºåå¤‡
    }
  }
  
  // è·å–æŒ‡å®šè¯­è¨€çš„æ–‡æœ¬
  if (text && typeof text === 'object' && currentLang in text) {
    let result = text[currentLang];
    
    // æ›¿æ¢å‚æ•°å ä½ç¬¦
    if (typeof result === 'string' && Object.keys(params).length > 0) {
      for (const [paramKey, paramValue] of Object.entries(params)) {
        result = result.replace(new RegExp(`\\{${paramKey}\\}`, 'g'), String(paramValue));
      }
    }
    
    return result;
  }
  
  console.warn(`æœªæ‰¾åˆ°è¯­è¨€æ–‡æœ¬: ${key} (${currentLang})`);
  return key; // è¿”å›é”®åä½œä¸ºåå¤‡
}

/**
 * è·å–ä¸­æ–‡æ–‡æœ¬ï¼ˆä¾¿æ·å‡½æ•°ï¼‰
 */
function getTextZh(key, params = {}) {
  return getText(key, 'zh', params);
}

/**
 * è·å–è‹±æ–‡æ–‡æœ¬ï¼ˆä¾¿æ·å‡½æ•°ï¼‰
 */
function getTextEn(key, params = {}) {
  return getText(key, 'en', params);
}

// å¯¼å‡ºåˆ°å…¨å±€ä½œç”¨åŸŸ
window.I18nTexts = {
  getText,
  getTextZh,
  getTextEn,
  I18N_TEXTS
};

export {
  getText,
  getTextZh,
  getTextEn,
  I18N_TEXTS
};
