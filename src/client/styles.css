@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body {
    @apply h-full m-0;
  }
  
  body {
    @apply font-sans text-text overflow-x-hidden;
  }
  
  * {
    box-sizing: border-box;
  }
}

@layer components {
  /* 通用卡片 */
  .card {
    @apply bg-white border border-border rounded-2xl shadow-sm;
  }
  .card-header {
    @apply px-4 py-3 border-b border-border;
  }
  .card-body {
    @apply p-4;
  }

  /* Astral 列表与按钮 */
  .list-item {
    @apply px-3 py-2 rounded-lg cursor-pointer select-none transition-colors duration-150;
    @apply text-gray-700 hover:bg-gray-100 flex items-center justify-between gap-2;
  }
  .list-item.active {
    @apply bg-primary-light text-primary font-medium;
  }
  .list-item .actions {
    @apply hidden gap-2 flex-shrink-0;
  }
  .list-item:hover .actions {
    @apply flex;
  }

  .icon-btn {
    @apply w-8 h-8 inline-flex items-center justify-center rounded-lg border border-border bg-white text-gray-700;
    @apply hover:bg-gray-100 transition-colors;
  }

  .floating-btn {
    @apply fixed bottom-8 right-8 w-12 h-12 rounded-full bg-primary text-white text-2xl leading-none;
    @apply flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200;
  }

  /* 模态框 */
  .modal-overlay {
    @apply fixed inset-0 bg-black/40 flex items-center justify-center z-50;
  }
  .modal {
    @apply bg-white rounded-2xl shadow-xl w-full max-w-2xl border border-border;
  }
  .modal-header {
    @apply px-5 py-3 border-b border-border font-semibold text-gray-800 flex items-center justify-between;
  }
  .modal-body {
    @apply p-5;
  }
  .modal-footer {
    @apply px-5 py-3 border-t border-border flex items-center justify-end gap-3;
  }
  .input {
    @apply w-full border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary;
  }
  .textarea {
    @apply w-full min-h-[200px] border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary;
  }
  .btn-primary {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary-dark transition-colors;
  }
  .btn-secondary {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors;
  }

  /* 侧边栏样式 - 默认 PC 端 */
  .sidebar {
    @apply fixed top-0 left-0 w-[300px] h-screen overflow-y-auto overflow-x-hidden;
    @apply bg-gradient-to-b from-bg-panel to-bg-panel-2 border-r border-border;
    @apply px-3.5 py-5 z-10;
  }
  
  .content {
    @apply ml-[300px] min-h-screen p-7 overflow-y-auto;
  }
  
  /* 品牌和导航 */
  .brand {
    @apply font-bold text-lg mb-3.5;
  }

  /* 语言切换区域 */
  .language-section {
    @apply mb-4;
  }

  .language-switcher {
    @apply flex justify-center;
  }

  .sidebar-language-btn {
    @apply flex items-center gap-2 px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200;
    @apply border border-gray-200 rounded-lg transition-all duration-200 ease-in-out;
    @apply text-gray-700 hover:text-gray-900;
  }

  .sidebar-language-btn i {
    @apply text-base;
  }

  .sidebar-language-btn span {
    @apply font-medium;
  }

  /* 用户信息区域 */
  .user-info-section {
    @apply mt-3 mb-3 p-3 rounded-xl border border-border/50 hidden;
    background-color: rgba(248, 249, 250, 0.8);
  }

  .sidebar-user-info {
    @apply flex justify-between items-center gap-3;
  }

  .user-details {
    @apply flex items-center gap-2;
  }

  .user-email {
    @apply text-sm font-medium text-gray-700 flex-1 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .sidebar-logout-btn {
    @apply w-6 h-6 text-gray-500 border-0 bg-transparent cursor-pointer flex-shrink-0;
    @apply flex items-center justify-center transition-all duration-200 ease-in-out;
  }
  
  .sidebar-logout-btn i {
    font-size: 14px;
  }

  .sidebar-logout-btn:hover {
    @apply text-gray-700 transform scale-110;
  }
  
  .nav-section {
    @apply mt-5;
  }
  
  .nav-section:has(.nav-title-section) {
    @apply mt-7 mb-2;
  }
  
  .nav-title {
    @apply text-text-muted text-xs tracking-wide uppercase mx-2 my-3;
  }
  
  .nav-title-section {
    @apply font-bold text-lg relative text-text normal-case tracking-normal;
  }
  
  .nav-title-section::after {
    @apply absolute -bottom-2 left-0 right-0 h-px bg-border;
    content: '';
  }
  
  .nav-list {
    @apply list-none p-0 m-0;
  }
  
  .nav-list a {
    @apply block py-2 px-2.5 mx-1 my-0.5 text-text no-underline rounded-lg;
    @apply transition-all duration-200 ease-in-out;
    font-size: 15px;
  }
  
  .nav-list a:hover {
    @apply bg-bg-panel-2 text-primary;
  }
  
  .nav-list a.active {
    @apply bg-primary-light text-primary;
  }
  
  /* 嵌套导航 */
  .nav-subgroup {
    @apply my-2;
  }
  
  .nav-subtitle {
    @apply text-text text-sm mx-1 my-0.5 font-normal py-2 px-2.5;
  }
  
  .nav-sublist {
    @apply list-none p-0 m-0;
  }
  
  .nav-sublist li {
    @apply ml-5;
  }
  
  .nav-sublist a {
    @apply block py-2 px-2.5 mx-1 my-0.5 text-text no-underline rounded-lg;
    @apply transition-all duration-200 ease-in-out;
  }
  
  .nav-sublist a:hover {
    @apply bg-bg-panel-2 text-primary;
  }
  
  .nav-sublist a.active {
    @apply bg-primary-light text-primary;
  }
  
  /* 文章内容 */
  #article {
    @apply max-w-[860px] mx-auto bg-white/95 border border-border rounded-2xl p-8;
    box-shadow: 0 4px 20px rgba(0,0,0,.1), inset 0 1px 0 rgba(255,255,255,.8);
    line-height: 1.6;
    font-size: 16px;
    color: #333;
  }
  
  /* 文章元数据 */
  #article .article-meta {
    @apply border-b border-border pb-4 mb-6;
  }
  
  /* 标题样式 */
  #article h1 {
    @apply text-3xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-primary;
    line-height: 1.2;
  }
  
  #article h2 {
    @apply text-2xl font-semibold text-gray-800 mt-8 mb-4 pb-2 border-b border-gray-200;
    line-height: 1.3;
  }
  
  #article h3 {
    @apply text-xl font-semibold text-gray-800 mt-6 mb-3;
    line-height: 1.4;
  }
  
  #article h4 {
    @apply text-lg font-medium text-gray-700 mt-5 mb-2;
  }
  
  #article h5 {
    @apply text-base font-medium text-gray-700 mt-4 mb-2;
  }
  
  #article h6 {
    @apply text-sm font-medium text-gray-600 mt-3 mb-2 uppercase tracking-wide;
  }
  
  /* 段落样式 */
  #article p {
    @apply text-gray-700 mb-4 leading-7;
  }
  
  #article p:last-child {
    @apply mb-0;
  }
  
  /* 链接样式 */
  #article a {
    @apply text-primary hover:text-primary-dark underline decoration-2 underline-offset-2;
    transition: color 0.2s ease;
  }
  
  #article a:hover {
    @apply decoration-primary-dark;
  }
  
  /* 强调文本 */
  #article strong, #article b {
    @apply font-semibold text-gray-900;
  }
  
  #article em, #article i {
    @apply italic;
    color: #999999;
  }
  
  /* 列表样式 */
  #article ul {
    @apply list-disc mb-4 space-y-2 text-gray-700;
    padding-left: 2rem;
    list-style-position: outside;
  }
  
  #article ol {
    @apply list-decimal mb-4 space-y-2 text-gray-700;
    padding-left: 2rem;
    list-style-position: outside;
  }
  
  #article li {
    @apply leading-7;
    padding-left: 0.5rem;
    text-indent: 0;
  }
  
  #article li::marker {
    @apply text-primary;
  }
  
  /* 嵌套列表 */
  #article ul ul, #article ol ul {
    @apply list-disc ml-6 mt-2 mb-2;
  }
  
  #article ul ol, #article ol ol {
    @apply list-decimal ml-6 mt-2 mb-2;
  }
  
  /* 引用块 */
  #article blockquote {
    @apply border-l-4 border-primary bg-gray-50 py-3 px-4 my-6 italic;
  }
  
  #article blockquote p {
    @apply mb-0 text-gray-600;
  }
  
  #article blockquote p:last-child {
    @apply mb-0;
  }
  
  /* 代码样式 */
  #article code {
    @apply bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-mono;
    font-size: 0.9em;
  }
  
  #article pre {
    @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto my-6;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
    font-size: 14px;
    line-height: 1.5;
  }
  
  #article pre code {
    @apply bg-transparent text-gray-100 p-0 rounded-none;
    font-size: inherit;
  }
  
  /* 分隔线 */
  #article hr {
    @apply border-0 border-t border-gray-300 my-8;
  }
  
  /* 表格样式 */
  #article table {
    @apply w-full border-collapse border border-gray-300 my-6;
  }
  
  #article th, #article td {
    @apply border border-gray-300 px-4 py-2 text-left;
  }
  
  #article th {
    @apply bg-gray-50 font-semibold text-gray-900;
  }
  
  #article td {
    @apply text-gray-700;
  }
  
  /* 图片样式 */
  #article img {
    @apply max-w-full h-auto rounded-lg shadow-md my-6;
  }
  
  /* 键盘按键样式 */
  #article kbd {
    @apply bg-gray-100 text-gray-800 px-2 py-1 rounded border border-gray-300 text-sm font-mono;
    box-shadow: 0 1px 1px rgba(0,0,0,0.1);
  }
  
  /* 标记文本 */
  #article mark {
    @apply bg-yellow-200 text-gray-900 px-1 rounded;
  }
  
  /* 删除线文本 */
  #article del {
    @apply line-through text-gray-500;
  }
  
  /* 下标和上标 */
  #article sub, #article sup {
    @apply text-xs;
  }
  
  /* 任务列表 */
  #article input[type="checkbox"] {
    @apply mr-2;
  }
  
  /* 定义列表 */
  #article dl {
    @apply mb-4;
  }
  
  #article dt {
    @apply font-semibold text-gray-900 mt-4 mb-1;
  }
  
  #article dd {
    @apply ml-4 mb-2 text-gray-700;
  }
  
  /* 脚注样式 */
  #article .footnote {
    @apply text-sm text-gray-600 border-t border-gray-200 pt-4 mt-8;
  }
  
  /* 响应式调整 */
  @media (max-width: 768px) {
    #article {
      @apply p-4 text-sm;
    }
    
    #article h1 {
      @apply text-2xl;
    }
    
    #article h2 {
      @apply text-xl;
    }
    
    #article h3 {
      @apply text-lg;
    }
    
    #article pre {
      @apply text-xs;
    }
  }
  
  .muted {
    @apply text-text-muted text-xs mx-1.5 my-2;
  }
  
  /* 首页样式 */
  .home-page {
    @apply max-w-none m-0 bg-transparent border-none rounded-none p-0 shadow-none;
  }
  
  
  .home-content {
    @apply max-w-4xl mx-auto;
  }
  
  .home-intro {
    @apply text-center bg-white p-12 rounded-2xl shadow-lg mb-10;
  }
  
  .home-intro h1 {
    @apply text-gray-800 text-5xl mb-6 font-bold;
  }
  
  .home-intro p {
    @apply text-lg leading-7 text-gray-600 mb-4;
  }
  
  .home-sections {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-10;
  }
  
  .home-section {
    @apply bg-white p-8 rounded-2xl shadow-lg transition-all duration-300 ease-in-out;
  }
  
  .home-section:hover {
    @apply -translate-y-1 shadow-hover;
  }
  
  .home-section h3 {
    @apply text-gray-800 text-xl mb-4 flex items-center gap-2;
  }
  
  .home-section p {
    @apply text-gray-600 leading-6 mb-6;
  }
  
  .section-articles {
    @apply flex flex-col gap-3;
  }
  
  .article-link {
    @apply flex justify-between items-center py-4 px-5 bg-gray-50 rounded-xl;
    @apply no-underline text-gray-800 transition-all duration-300 ease-in-out;
    @apply border-2 border-transparent;
  }
  
  .article-link:hover {
    @apply bg-gray-100 border-primary translate-x-1;
  }
  
  .article-title {
    @apply font-medium flex-1;
  }
  
  .article-arrow {
    @apply text-primary font-bold text-lg transition-transform duration-300 ease-in-out;
  }
  
  .article-link:hover .article-arrow {
    @apply translate-x-1;
  }
  
  .home-footer {
    @apply text-center bg-white p-8 rounded-2xl shadow-lg;
  }
  
  .home-footer p {
    @apply text-gray-600 text-lg m-0 italic;
  }
  
  /* 移动端 AppBar */
  .mobile-appbar {
    @apply fixed top-0 left-0 right-0 h-14 bg-white border-b border-border z-20;
    @apply hidden items-center justify-between px-4;
  }
  
  .mobile-appbar .home-btn {
    @apply w-8 h-8 flex items-center justify-center text-primary text-lg font-semibold;
  }
  
  .mobile-appbar .home-btn i {
    -webkit-text-stroke: 1px currentColor;
    -webkit-text-fill-color: transparent;
    text-stroke: 1px currentColor;
    text-fill-color: transparent;
  }
  
  .mobile-appbar .title {
    @apply text-lg font-medium text-gray-800 truncate mx-4;
  }
  
  .mobile-appbar .appbar-actions {
    @apply flex items-center;
  }


  .mobile-appbar .drawer-toggle {
    @apply w-14 h-14 flex items-center justify-center text-primary text-2xl font-black;
  }
  
  /* 移动端抽屉遮罩 */
  .mobile-drawer-overlay {
    @apply hidden fixed inset-0 bg-black bg-opacity-50 z-30;
  }
  
  .mobile-drawer-overlay.active {
    @apply block;
  }
  
  /* 响应式设计 */
  @media (max-width: 768px) {
    /* 显示移动端 AppBar */
    .mobile-appbar {
      @apply flex;
    }
    
    /* 调整内容区域 */
    .content {
      @apply ml-0 pt-14 p-4;
      padding: 3.5rem 0px 0px;
    }
    
    /* 移动端抽屉样式 - 默认隐藏 */
    .sidebar {
      @apply fixed w-80 h-[calc(100vh-3.5rem)] z-40;
      @apply transition-all duration-300 ease-in-out;
      @apply bg-white border-l border-border shadow-xl;
      top: 3.5rem; /* 56px = h-14 */
      right: -320px !important; /* 完全隐藏，320px = w-80 */
      left: auto !important; /* 覆盖PC端的left设置 */
    }
    
    .sidebar.mobile-open {
      right: 0 !important; /* 完全显示 */
    }
    
    /* 首页样式调整 */
    .home-intro h1 {
      @apply text-4xl;
    }
    
    .home-sections {
      @apply grid-cols-1 gap-5;
    }
    
    .home-section {
      @apply p-6;
    }
    
    .home-intro {
      @apply py-8 px-5;
    }
    
    /* 文章内容调整 */
    #article {
      @apply p-4 text-sm max-w-none mx-0 rounded-none;
    }
    
    #article h1 {
      @apply text-2xl;
    }
    
    #article h2 {
      @apply text-xl;
    }
    
    #article h3 {
      @apply text-lg;
    }
    
    #article pre {
      @apply text-xs;
    }
  }
  
  @media (min-width: 769px) {
    /* PC 端保持原样式 */
    .mobile-appbar {
      @apply hidden !important;
    }
    
    .sidebar {
      @apply fixed top-0 left-0 w-[300px] h-screen;
      @apply transform-none transition-none shadow-none;
      @apply bg-gradient-to-b from-bg-panel to-bg-panel-2 border-r border-border;
      @apply px-3.5 py-5 z-10 overflow-y-auto overflow-x-hidden;
    }
    
    .content {
      @apply ml-[300px] min-h-screen p-7 overflow-y-auto;
    }
  }
}
